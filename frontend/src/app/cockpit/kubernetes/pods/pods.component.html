<div *ngIf="loading == false" class="d-flex justify-content-center">
    <div class="spinner-border" role="status">
        <span class="sr-only" id="loading"></span>
    </div>
</div>
<div class="row my-5">
    <div class="col-12">
        <div class="card p-4">
            <div class="card-header p-0 position-relative mt-n5 mb-4 head">
                <div
                        class="bg-gradient-primary shadow-primary border-radius-lg pt-4 pb-3 px-4 table_header_section"
                >
                    <h6 class="text-white text-capitalize ">
                        Overview
                    </h6>
                </div>
            </div>
            <div class="table-block">
                <div class="table-block-content">
                    <div class="table-responsive">
                        <div class="d-none d-sm-block">
                            <ngx-datatable
                                    (activate)="onActiavte($event, addModal)"
                                    [columnMode]="'force'"
                                    [footerHeight]="50"
                                    [headerHeight]="$any('auto')"
                                    [limit]="10"
                                    [rows]="tableRows"
                                    [rowHeight]="$any('auto')"
                                    [scrollbarH]="false"
                                    [externalSorting]="true"
                                    [offset]="tableOffset"
                                    (page)="onChange($event)"
                                    class="material"
                            >
                                <ngx-datatable-column
                                        [sortable]="false"
                                        cellClass="table-cell-style"
                                        headerClass="table-header-style"
                                        name="NAME"
                                        prop="pod"

                                >
                                    <ng-template
                                        let-row="row"
                                        let-value="value"
                                        ngx-datatable-cell-template
                                        style="cursor: pointer"
                                    >
                                        {{ value }}
                                    </ng-template>
                                </ngx-datatable-column>

                                <ngx-datatable-column
                                        cellClass="pl-4 table-cell-style"
                                        headerClass="table-header-style"
                                        name="PODS"
                                        prop="pod"
                                >
                                    <ng-template let-value="value" ngx-datatable-cell-template>
                                        {{ value }}
                                    </ng-template>
                                </ngx-datatable-column>

                                <ngx-datatable-column
                                        cellClass="pl-4 table-cell-style"
                                        headerClass="table-header-style"
                                        name="NAMESPACE"
                                        prop="namespace"
                                >
                                    <ng-template let-value="value" ngx-datatable-cell-template>
                                        {{ value }}
                                    </ng-template>
                                </ngx-datatable-column>

                                <ngx-datatable-column
                                        cellClass="pl-4 table-cell-style"
                                        headerClass="table-header-style"
                                        name="STATUS"
                                        prop="status"
                                >
                                    <ng-template let-value="value" ngx-datatable-cell-template>
                                        {{ value }}
                                    </ng-template>
                                </ngx-datatable-column>

                            </ngx-datatable>
                        </div>

                        <div *ngFor="let row of tableRows"
                             class="mobile-table-row d-block d-sm-none col-xl-3 col-sm-6 mb-xl-0 mb-4">
                            <div class="col-12 text-white font-weight-bolder pb-1 px-0 mb-1 row-title border-bottom border-secondary">
                                {{ row.pod }}
                            </div>
                            <div class="mr-auto d-flex flex-column">
                                <span class="text-white heading">PODS</span>
                                <span class="score-details">{{ row.pod }}</span>
                            </div>
                            <div class="mr-auto d-flex flex-column">
                                <span class="text-white heading">NAMESPACE</span>
                                <span class="score-details">{{ row.namespace }} </span>
                            </div>
                            <div class="mr-auto d-flex flex-column">
                                <span class="text-white heading">STATUS</span>
                                <span class="score-details">{{ row.status }} </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>


<ng-template #addModal>
    <span class="ms-5 me-3 pt-3" style="text-align: right" (click)="cancelForm()"><i class="material-icons opacity-10">close</i></span>
    <div class="modal-header bg-gradient-dark px-3">
        <h5 class="modal-title pull-left ms-2 ">{{modalTitle}}</h5>
        <button class="btn btn-secondary text-white ml-5 my-2" (click)="onDelete()">
           Delete
        </button>
    </div>
    <div class="modal-body px-4">
        <button class="btn text-white my-1" [ngClass]="{'active bg-info': summary== true}" (click)="openContent('summary')">
            <i class="material-icons opacity-10 mx-1">description</i>Summary
        </button>
        <button class="btn text-white my-1" [ngClass]="{'active bg-info': events== true}" (click)="openContent('events')">
            <i class="material-icons opacity-10 mx-1">event</i>Events
        </button>
        <button class="btn text-white my-1" [ngClass]="{'active bg-info': logs== true}" (click)="openContent('logs')">
            <i class="material-icons opacity-10 mx-1">notes</i>Logs
        </button>
<!--        <hr>-->
        <div *ngIf="summary" class="mt-3">
           <div class="row p-3 m-2 summaryData" >
               <div class="col-6 p-2">
                    Resource Name
               </div>
               <div class="col-6 p-2">
                   {{resData.resource_name}}
               </div>
               <hr>
               <div class="col-6 p-2">
                   Namespace
               </div>
               <div class="col-6 p-2">
                   {{resData.namespace}}
               </div>
               <hr>
               <div class="col-6 p-2">
                   Resource Kind
               </div>
               <div class="col-6 p-2">
                   {{resData.resource_kind}}
               </div>
           </div>
            <div class="row p-3 m-2" >
                <button class="btn text-white my-1" [ngClass]="{'active bg-info': summary== true}" (click)="openContent('summary')">
                    <i class="material-icons opacity-10 mx-1">description</i>Live Manifest
                </button>
                <div class="row p-3 m-2 summaryData" >
                    <pre> {{liveManifest}}</pre>
                </div>
            </div>
        </div>
        <div *ngIf="events" class="mt-3">
            <div class="row p-3 m-2 summaryData" >
                <div class="col-12 p-2">
                    <pre>{{eventData}}</pre>
                </div>
            </div>
        </div>
        <div *ngIf="logs" class="mt-3">
            <div class="row p-3 m-2 summaryData" >
                <div class="col-12 p-2">
                    <pre>{{logData}}</pre>
                </div>
            </div>
        </div>
    </div>
</ng-template>
